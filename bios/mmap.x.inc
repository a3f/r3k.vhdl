/* This file is automatically generated. Edit mmap.x.inc instead */
#include "config.h"
ENTRY(_reset)

MEMORY
{
    MMIO (rw)  : ORIGIN = MMIO_BASE, LENGTH = 128K
    ROM  (rx)  : ORIGIN = ROM_BASE,  LENGTH = 128K
    RAM  (rw)  : ORIGIN = RAM_BASE,  LENGTH = 512K
}
 
SECTIONS
{
    .text : AT(ELF_BASE)
    {
        __bios_start = .;
        __text_start = ABSOLUTE(.);
        /* KEEP(*(.ivt)) */
        KEEP(*(.text.boot))
        *(.text .text.*)
        *(.rodata .rodata.*)
        . = ALIGN(16);
        __text_end = ABSOLUTE(.);
    } > ROM
 
    .data : AT( ELF_BASE + SIZEOF(.text) )
    {
        __data_start = ABSOLUTE(.);
		_gp = ALIGN(16);
        *(.data .data.*)
        *(.sdata .sdata.*)
        *(.eh_frame .eh_frame.*)
        . = ALIGN(16);
        __data_end = ABSOLUTE(.);
    } > RAM
 
    .bss : AT( ELF_BASE + SIZEOF(.text) + SIZEOF(.data) )
    {
    	__bss_start = ABSOLUTE(.);
        *(.sbss .scommon)
        *(.bss .bss.*)
        *(COMMON)
        . = ALIGN(16);
        __bss_end = ABSOLUTE(.);
    } > RAM
	. = ALIGN(8);
	. = . + 0x1000; /* 4k of stack memory */
	__ss_top = .;

    __bios_end = .;

	/* FIXME make it work
	. = ALIGN(64);
	__heap_start = .;
	. = . + 0x1000;
	__heap_end = .;
	*/
    /DISCARD/ :
    {
        *(.comment)
        *(.note)
        *(.options)
        *(.pdr)
        *(.reginfo)
        *(.gnu.attributes)
        *(.MIPS.abiflags)
        *(.MIPS.options)
    }
}


