\include{preamble}

\newcommand\myheading[1]{%
  \par\bigskip
  {\Large\bfseries#1}\par\smallskip}
\setbeamertemplate{caption}{\raggedright\insertcaption\par}
\newcommand{\ebackupbegin}{
   \newcounter{finalframe}
   \setcounter{finalframe}{\value{framenumber}}
}
\newcommand{\ebackupend}{
   \setcounter{framenumber}{\value{finalframe}}
}

\usepackage{color}
\usepackage{listings}
\usepackage{eurosym}
\usepackage{stfloats}
\usepackage{subfig}

\definecolor{javared}{rgb}{0.6,0,0} % for strings
\definecolor{javagreen}{rgb}{0.25,0.5,0.35} % comments
\definecolor{javapurple}{rgb}{0.5,0,0.35} % keywords
\definecolor{javadocblue}{rgb}{0.25,0.35,0.75} % javadoc

\lstset{language=C,
	basicstyle=\tiny\ttfamily,
	keywordstyle=\color{javapurple}\bfseries,
	stringstyle=\color{javared},
	commentstyle=\color{javagreen},
	morecomment=[s][\color{javadocblue}]{/**}{*/},
	numbers=none,
	numberstyle=\tiny\color{black},
	stepnumber=1,
	numbersep=0pt,
	tabsize=2,
	showspaces=false,
	showstringspaces=false}

% unten in der preamble.tex sind noch weitere default-werte

\subtitle{Basispraktikum Technische Informatik}
\date{15.08.2017}

% Um das blaue Titel-Bild zu entfernen
%\titleimage{nogo}

\begin{document}

\begin{frame}
	\titlepage
\end{frame}


\section{MIPS I ISA}

\begin{frame}{Data Path alt}
\begin{center}
\includegraphics[keepaspectratio=true,width=0.75\paperwidth]{datapath-old.png}
\end{center}
\end{frame}

\begin{frame}{Data Path neu}
\begin{center}
\includegraphics[keepaspectratio=true,width=0.9\paperwidth]{datapath-new.png}
\end{center} 
\end{frame}



\begin{frame}{LED Entity}
\begin{center}
\includegraphics[keepaspectratio=true,width=1.2\paperwidth]{ledsEntity.png}
\end{center} 
\end{frame}

\begin{frame}{Memory Mapping}
\begin{center}
\includegraphics[keepaspectratio=true,width=0.95\paperwidth]{memoryMapPackage.png}
\end{center} 
\end{frame}

\begin{frame}{LED Architecture}
\begin{center}
\includegraphics[keepaspectratio=true,width=0.95\paperwidth]{ledsArchitecture.png}
\end{center} 
\end{frame}

\begin{frame}{Button to LED}
\begin{center}
\includegraphics[keepaspectratio=true,width=0.80\paperwidth]{buttonToLed.png}
\end{center} 
\end{frame}

\begin{frame}{DipSwitch Architecture}
\begin{center}
\includegraphics[keepaspectratio=true,width=0.95\paperwidth]{dipswitchArchitecture.png}
\end{center} 
\end{frame}

\begin{frame}{Address Decoder}
\begin{center}
\includegraphics[keepaspectratio=true,width=0.95\paperwidth]{addrdecArichtecture.png}
\end{center} 
\end{frame}

\begin{frame}{VRAM}
\begin{center}
\includegraphics[keepaspectratio=true,width=0.9\paperwidth]{vramArchitecture.png}
\end{center} 
\end{frame}

\begin{frame}{Der MIPS R3000}
\begin{itemize}
       \item 1988 auf den Markt gekommen
       \item 32-bit, RISC Architektur
		\item 32 Register
		\item 5-Stufige Pipeline
\end{itemize}

\begin{center}
\includegraphics[scale=0.22]{R3000.jpg}
\end{center}

\end{frame}


%% Original Diagram MIPS von Hannesy and Patterson


\section{Unser MIPS System}

\begin{frame}{Bus-Teilnehmer}

\begin{itemize}
	\item ROM
	\item RAM
	\item VGA
	\item 8250 UART
	\pause
	\item DIP-Switch \& Buttons
	\item LEDs
\end{itemize}


\begin{center}
\includegraphics[scale=0.25]{bus.jpeg} %%Grafik s. WA
\end{center}

\end{frame}

\begin{frame}{UART}

\begin{itemize}
	\item Universal Asynchronous Receiver Transmitter
	\item NS8250 Class 
	\item Priorität -> Erlaubt debugging
	\item keine interrupts
	\pause
	\item Implementiert; aber wegen Zeit/Personalmangel nicht in Betrieb genommen
\end{itemize}
\begin{center}
\end{center}


\end{frame}

\begin{frame}{VGA Frame Puffer (VRAM)}
	\begin{itemize}
		\item C Programm schreibt schreibt in Array
		\item Array wird aus Speicher gelesen
		\item VGA Clock
	\end{itemize}
	\pause
	Realisierung:
	\begin{itemize}
		\item Dual ported memory: Parallele E/A ports mit separaten Clocks
		\item Eine Seite wird über den Memory Bus vom Maschinencode beschrieben
		\item Die andere Seite wird vom VGA Controller gelesen
		\item Separierung in VRAM und VGA Controller
		\item Tupel von VRAM und Controller ist VGA mode. Nur ein Mode implementiert
		\item Überpixel: 32x32 pixel \& 8 bit Farben $\rightarrow$ VRAM-Größe von 300 byte
	\end{itemize}

\end{frame}

\begin{frame}{VGA}
	\begin{itemize}		
		\item 255 Farben
		\item Größe: 160*120 -> 19k byte
		\item klein anfangen, feststellen ob der Speicher reicht
	\end{itemize}
\end{frame}


\section{Wie kommt die Software auf den FPGA?}

\begin{frame}{Komplexität im Griff behalten?}

\begin{itemize}
\item Emulation:
\begin{itemize}
    \item QEMU mit R3000, UART und VGA
    \item Code lokal Testebar vor Auspielen auf den FPGA
\end{itemize}
    \item Simulation: Testbenches: z.B. ALU und Instruktionsdecoder. Alleinstehend, gut testbar.
\end{itemize}
\begin{center}
\includegraphics[scale=0.85]{qemu.png}
\end{center}

\end{frame}


\begin{frame}{Applikationen}
\begin{itemize}
\item Mandebrot-Fraktal
\item Vllt. DOS Demos portieren
\end{itemize}

\begin{center}
\includegraphics[keepaspectratio=true,width=0.40\paperwidth]{mandelbrot.png}
\end{center}


\end{frame}

\begin{frame}{Case Study: DOOM}
\begin{itemize}
	\item ROM: 4 MB benötigt
	\item RAM: Block-RAM in Größe von bis zu 19KB verfügbar. DDR-RAM 128MB. 4MB benötigt
	\item VRAM: 64,256 byte (320*200, 8 bit Farb Palette)
	\item Datentransfer: 5 Minuten bei 115200 baud, wenn keine Bitfehler
\end{itemize}
\end{frame}


\begin{frame}{Doom?}
\begin{center}
\includegraphics[keepaspectratio=true,width=0.40\paperwidth]{doom.png}
\end{center}
 
\end{frame}


\end{document}
